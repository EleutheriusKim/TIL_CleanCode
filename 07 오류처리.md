# 들어가면서 
> 뭔가 잘못될 가능성은 늘 존재한다.    
> **뭔가 잘못되면 바로 잡을 책임은 바로 우리 프로그래머에게 있다.**      

깨끗한 코드와 오류 처리는 확실히 연관성이 있다.       
상당수 코드 기반은 전적으로 오류 처리 코드에 좌우된다.  
오류 처리는 중요하다.    
하지만 오류 처리 코드로 인해 프로그램 논리를 이해하기 어려워진다면    
깨끗한 코드라 부르기 어렵다.   

이제부터 우리는 **우아하고 고상하게** 오류를 처리하는 기법을 배워보겠다.   

# 오류 코드보다 예외를 사용하라      

```java
public class DeviceController {
    ...
	  public void sendShutDown() {
		    DeviceHandle handle = getHandle(DEV1);
		    // 디바이스 상태를 점검한댜.
		    if (handle != DeviceHandle.INVALID) {
			  // 레코드 필드에 디바이스 상태를 저장한다.
			      retrieveDeviceRecord(handle);
			      // 디바이스가 일시정지 상태가 아니라면 종료한다.
			      if (record.getStatus() != DEVICE_SUSPENDED) {
				        pauseDevice(handle);
				        clearDeviceWorkQueue(handle);
				        closeDevice(handle);
			      } else {
                logger.log("Device suspended. Unable to shut down");
			      }
		    } else {
			      logger.log("Invalid handle for: " + DEV1.toString());
		    }
	  }
	  ...
}
```
오류 코드를 사용한다면 몇가지 문제점이 발생한다.      
   
* 함수를 호출한 즉시 오류를 확인해야 하기 때문에 호출자 코드가 복잡해진다.      
* 오류 확인을 잊어버리기 쉽다.
     
```java
public class DeviceController {
	  ...
	  public void sendShutDown() {
		    try {
			      tryToShutDown();
		    } catch (DeviceShutDownError e) {
			      logger.log(e);
		    }
	  }

	  private void tryToShutDown() throws DeviceShutDownError {
		    DeviceHandle handle = getHandle(DEV1);
		    DeviceRecord record = retrieveDeviceRecord(handle);
		    pauseDevice(handle); 
		    clearDeviceWorkQueue(handle); 
		    closeDevice(handle);
	  }

	  private DeviceHandle getHandle(DeviceID id) {
		    ...
		    throw new DeviceShutDownError("Invalid handle for: " + id.toString());
		    ...
	  }
	  ...
}
```
예외를 던지는 방법은 호출자 코드를 깔끔하게 만들어 논리가 뒤섞이지 않게 해준다.      

* 가독성이 좋아졌다.  
* 코드 품질이 나아졌다.   
* 기능 알고리즘과 오류 처리 알고리즘을 분리했다.   
* 각 개념을 독립적으로 살펴보고 이해할 수 있게 되었다.   

# Try-Catch-Finally 문부터 작성하라    





